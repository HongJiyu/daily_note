# 指针与内存地址及大小

一个地址 指向一个字节大小的内存。

指针是存放地址的，而地址值是无符号的，看操作系统位数。

32位：最大内存地址值：2的32次方-1。

64位：最大内存地址值：2的64次方-1。

即就算是1号位地址 ，其值也是00000......1，前面是占满的。

因此指针占用内存是固定大小，不管指针的类型是啥。只存首地址值。

首地址：一个int类型，4个字节，一个字节一个地址，只需要存第一个字节的地址值即可。

# 指针、数组、地址

- 数组名是一个地址，不需要加&。

如 int [] arr ={1}  ， arr就是一个地址，数组第一个元素的首地址。

而其他变量 int  a=1 , 要取到a的地址，必须前面加& , 如&a

想要根据地址打印出地址值：

```c
printf("%p",&非数组的变量名)
printf("%p",数组名)
```



- 地址用来给指针赋值。

指针的内存位置，存放的是一个地址值（16进制位）

因此想要打印出指针存储的地址值，只需要直接打印出指针值即可，x表示值是16进制

```c
intt a=1;
int * p=&a;
print("%X",p);
```

- 数组名赋予指针，则指针名拥有数组名的操作。

```c
int arr[10]={0};
int *p=arr;
//则p和arr的操作一致  p[0]等同arr[0] ... 
```

# 指针数组

存放指针的数组

```c
int * arr[]={&a,&b}
```



# 多级指针

 不管指针多少级，都是存放一个地址。



# 指针和函数

- 用指针作为函数参数，通过这个函数来改变变量值。

- 函数参数中有数组，都会被转化为指针。如果函数是要遍历数组，还应传数组长度（字符串不用，因为默认以字符\0结尾）。
- 字符数组和字符指针区别

```c
char * test(){
    //在栈中创建了一个字符数组，其内容如下
    char arr[]="hello world";
    //在栈中创建了指针，在常量池中创建了字符串，指针指向常量池地址
    char * arr ="hello world";
    return arr;
}
```

因此当以上test函数返回后，如果是字符数组，则被销毁了（无法获取到其值）。而字符指针，则返回对应的地址。再通过地址获取到对应的值，该值可读，不可被修改，因为是常量。

# 指针和字符串

- strlen 有效字符长度，不包括\0
- sizeof 包含\0的占用的大小
- 

# const 问题

```c
const int a=10;
int *p =&a;
*p=100;
```

以上会的a虽然是const，但是会被其他程序修改，可以通过define解决。



```c
const int * p =&b;
*p=100;  //有问题
```

这个const表示，指针p可以被修改，但是p指向的地址的值不能被修改。



```c
int * const p=&a;
p=&b;  //有问题
```

这个const表示，指针p不可以被修改，但是p指向的地址的值能被修改。



```c
const int * const p=&a;
p=&b;  //有问题
*p=100 //有问题
```

这个const表示，指针p不可以被修改，p指向的地址的值也不能被修改。



# 注意

- 0-255 是系统保留，不能读，不可以写

- 野指针：破坏其他程序的内存数据

- 空指针：用于条件判断

- void指针：可以被任何类型赋值，但是要读写该指针指向的地址的值时需要强转，不然不知道要读、写多少个字节

```c
int a=0;
void * b =&a;
//通过指针b读、写a
printf("%d",*(in *)b);  //先强转为int类型的指针，再读值
*(int *)b=1;  //先强转为int类型的指针，再写值
```

- 数组是连续的内存地址，因此可以通过数组元素类型的指针来操作这个数组

```c
int []a={1,2,3};
int *b=a;  
//为什么不是
int *b[] =a;

```

- 字符串是char [] ，而char [] 的变量名是首地址，因此字符串也可以作为地址

```c
char * arr[]={"hello","world"};
//等同
char [] tmp1="hello";
char [] tmp2="world";
char * arr[]={tmp1,tmp2}
```

- [] 优先级大于*

# 疑问

为什么说数组名是一个地址

int * p=arr   

arr[1] 为什么和 p[1] 一样

数组指针的意义

为什么数组名赋值给指针，这个指针不加* 时与数组名的意义一样

指针降级操作，加* 降级，表示指向的变量



