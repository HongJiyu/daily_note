# linux和磁盘搭配

搭配：略

在linux中，每个设备都被当成一个文件来对待，sata接口的硬盘文件名称即为 /dev/sd[a-d]，即有四种可能。

几乎所有的硬件设备文件都在/dev这个目录内

![image-20210718135340507](D:\note\操作系统\鸟哥私房菜\images\image-20210718135340507.png)

虚拟机内的磁盘是使用仿真器产生的，其磁盘文件名为/dev/vd[a-p]

近年来硬件的虚拟化技术的成熟，目前普通的个人计算机的CPU微指令集中，就已经整合了硬件虚拟化指令集了。随便一台计算机能虚拟化出好几台逻辑独立的系统。

window推荐使用virtualbox

# 磁盘分区



## 磁盘连接的方式与设备文件名的关系

常见的磁盘接口有两种 sata和sas（sas速度比较快，但目前的机器很少有对应的接口），usb（外接）。

虚拟机的磁盘设备名：/dev/vd[a-p]

实体机的磁盘设备名：/dev/sd[a-p]

1.假设你的主机为虚拟机，里面仅有一颗VirtIO接口的磁盘，磁盘文件名应该 是 /dev/vda 才对！

2.如果你的PC上面有两个SATA磁盘以及一个USB磁盘，而主板上面有六个SATA的插 槽。这两个SATA磁盘分别安插在主板上的SATA1, SATA5插槽上，由于是使用侦测到的顺序来决定设备文件名，并非与实际插槽代号 有关，因此设备的文件名如下：

- SATA1插槽上的文件名：/dev/sda 
- SATA5插槽上的文件名：/dev/sdb
- USB磁盘（开机完成后才被系统捉到）：/dev/sdc

## 磁盘分区（MBR和GPT）

分区单位为柱面（以下图是圆的半径切开后的横截面，1-400的线为半径）

![image-20210718154911409](D:\note\操作系统\鸟哥私房菜\images\image-20210718154911409.png)

分区表有两种格式：MBR和GPT

### MBR

P131

MBR有主要分区和延伸分区，一个磁盘至多只有一个延伸分区，延伸分区可以再分为多个逻辑分区。

主要分区和延伸分区最多只有4个，而我们平时分区，能分出4个以上，是因为多出的那些，是通过延伸分区继续分出的。

### GPT

P137

解决MBR容量问题。

## 开机流程中的BIOS和UEFI开机检测程序

目前主机系统在载入硬件驱动方面的程序，主要有早期的bios和新的uefi两种机制。

### bios

bios是写入到主板上的一个固件，固件就是写入到硬件上的一个软件程序。在开机时，计算机系统会主动执行的第一个程序。

BIOS会依据使用者的设置去取得能够开机的硬盘， 并且到该硬盘里面去读取第一个扇区的MBR位置。 MBR这个仅 有446 Bytes的硬盘容量里面会放置最基本的开机管理程序， 此时BIOS就功成圆满，而接下 来就是MBR内的开机管理程序的工作了

### UEFI

bios其实不懂GPT，得通过GPT提供相容模式才能读写到这个磁盘。而且BIOS时16位的程序，与新操作系统接轨有点弱掉了。

![image-20210718161824501](D:\note\操作系统\鸟哥私房菜\images\image-20210718161824501.png)

## linux安装模式下，磁盘分区的选择

由于整个Linux系统最重要的是根目录，因此根目录一定需要挂载到某个分区的。 至于其他的目录则可依使用者自己的需求来给予挂载到不同的分区。

![image-20210718162551033](D:\note\操作系统\鸟哥私房菜\images\image-20210718162551033.png)

# 选择适当的distribution

centos号称与RHEL完全相容的版本

### 主机服务规划与硬件关系

略

### 主机硬盘规划

P151 略

### 实际案例 

P152 略