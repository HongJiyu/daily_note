# node

## 基础

### 闭包

定义：所有的函数都是一个闭包。不过闭包更多地体现在嵌套函数，即子函数能够访问父函数的局部变量。当父函数返回子函数或者是子函数被外部变量所引用，那么父函数的作用域不会被回收。（大量则导致内存泄漏）

原理：同一个函数内部的闭包作用域只有一个，所有闭包共享。在执行函数的时候，如果遇到闭包，则会创建闭包作用域的内存空间，将该闭包所用到的局部变量添加进去，然后再遇到闭包，会在之前创建好的作用域空间添加此闭包会用到而前闭包没用到的变量。函数结束时，清除没有被闭包作用域引用的变量。

好处：外部函数的变量驻扎内存中，同时可以避免变量污染全局。

场景：暂无特殊使用场景。

### this绑定

具体看this绑定与丢失（new绑定、显示绑定、隐式绑定、默认绑定）

### call、apply、bind

都是改变指向。call和apply是直接执行，bind只是绑定。call和apply的区别是参数。

```js
fn.call(obj,xx,xx,xx)
fn.apply(obj,[xx,xx,xx])
fn1=fn.bind(obj); fn1(xx,xx,xx);
```

### 垃圾回收



## 深入

事件循环、异步非阻塞io、require机制、promise机制、npm i 原理、内存泄漏（原因及排查）

# koa

洋葱-》中间件加载机制

# egg

各类组件加载机制、socketIO及解决方案、node多进程（master、worker、agent）

