# char和varchar

https://www.cnblogs.com/Lance--blog/p/5193027.html   char和varchar

char(10) 和varchar(10) 在5.0之后都是指字符，也就是：1111：四个字符；aaaa：四个字符；种种种种：四个字符。

char是固定字符，定义过长的位置用空格补。varchar是动态字符，定义过长也没事（头部会记录长度），定义过短会被截取。

varchar 头部有1-2个字节记录长度，最大是65535 ，其单位是字符还是字节就不知道了。

# 时间

1.当你的项目不关注十分秒只关注日期时,选择date

2.当你的项目关注十分秒,并不存在跨时区问题时,选择datetime

3.当你的项目关注十分秒并跨时区时,选择timestamp(它把客户端插入的时间从当前时区转化为UTC（世界标准时间）进行存储。查询时，将其又转化为客户端当前时区进行返回)

4.当你的项目又跨时区又关注十分秒和毫秒时,并且认为自己的项目能发展很久的话,时间需要选择bigint即对timestamp的补充(因为timestamp的最大存储范围到 ‘2038-01-19 03:14:07.999999’)

目前使用nodejs语言，使用bigint存储。存储时间，都是Date.now()，因此存储到bigint都是UTC（世界标准时间），显示的时候再用moment，自动根据时区将UTC转化为对应时区的时间。因此没有时间上的问题。

## 时间函数

DATE_FORMAT(now(),'%Y-%m-%d %H:%i:%s')：是针对日期类型转为固定日期格式。

FROM_UNIXTIME(createAt/1000,"%m-%d")   时间戳转为固定日期格式

mysql 的date函数：date_sub、date_add

使用场景：将大于2020-03-03的时间格式化，然后按时间分组，也就是每天一组。然后统计每天的总量

SELECT DATE_FORMAT(createtime,'%Y-%m-%d') as days ,count(*) as total FROM tbl_post where createAt>'2020-03-03' GROUP BY days

## 分组

以上面的例子，group 可以使用select格式化出来的字段。

GROUP_CONCAT(s.name separator '、') as nameList   分组时将那组的数据放在一行显示



